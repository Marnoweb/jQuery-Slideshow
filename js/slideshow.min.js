/**
 * @name        jQuery Slideshow
 * @author      Matt Hinchliffe <https://github.com/i-like-robots/jQuery-Slideshow>
 * @modified    10/05/2012
 * @version     1.1.2
 */
(function(a,c){var b={auto:6000,speed:600,carousel:".carousel",items:".slide",easing:"swing",easeIn:"swing",easeOut:"swing",pagination:true,skip:true,queue:false,loop:false,transition:"scroll",gestures:true,onupdate:c};a.Slides=function(e,d){this.target=e;this.$target=a(e);this.opts=a.extend({},b,d,this.$target.data());this._init();return this};a.Slides.prototype={_init:function(){var d=this;this.$carousel=this.$target.children(this.opts.carousel);this.$items=this.$carousel.children(this.opts.items);this.count=this.$items.length;this.current=0;if(this.count<=1){return}this.$target.css("position","relative");this.$carousel.wrap('<div style="overflow:hidden;" />');this._transitions[this.opts.transition].setup.call(this);if(this.opts.pagination){this.$pagination=a('<ul class="slides-pagination" />');for(var e=0;e<this.count;e++){a('<li class="'+(e===this.current?"selected":"")+'"><a data-slides="'+e+'" href="">'+(e+1)+"</a></li>").appendTo(this.$pagination)}this.$pagination.appendTo(this.$target)}if(this.opts.skip){this.$next=a('<a class="slides-next" data-slides="next" href="">Next</a>').appendTo(this.$target);this.$previous=a('<a class="slides-previous" data-slides="previous" href="">Previous</a>').appendTo(this.$target)}if(this.opts.pagination||this.opts.skip){this.$target.on("click.slides","[data-slides]",function(g){g.preventDefault();var f=a(this);if(!f.hasClass("disabled")){d.to(f.data("slides"));if(d.timeout){clearTimeout(d.timeout)}}})}this.$target.on("update.slides",function(){d._update()});if(this.opts.gestures&&"ontouchstart" in document.documentElement){this.target.addEventListener("touchstart",function(f){d.t={x1:f.touches[0].pageX,y1:f.touches[0].pageY,el:f.touches[0].target}},false);this.target.addEventListener("touchmove",function(f){d.t.x2=f.touches[0].pageX;d.t.y2=f.touches[0].pageY;if(Math.abs(d.t.x1-d.t.x2)>30){f.preventDefault()}},false);this.target.addEventListener("touchend",function(){if((d.t.x2>0||d.t.y2>0)&&(Math.abs(d.t.x1-d.t.x2)>30||Math.abs(d.t.y1-d.t.y2)>30)){var f=function(){if(Math.abs(d.t.x1-d.t.x2)>=Math.abs(d.t.y1-d.t.y2)){return d.t.x1-d.t.x2>0?"left":"right"}else{return d.t.y1-d.t.y2>0?"up":"down"}}();if(f==="left"){d.to(d.current+1)}else{if(f==="right"){d.to(d.current-1)}}if(d.timeout){clearTimeout(d.timeout)}}},false)}this.to(this.current);if(this.opts.auto){this.timeout=setInterval(function(){d.to(d.current+1)},this.opts.auto)}},_update:function(){if(this.opts.pagination){this.$pagination.children().removeClass("selected").eq(this.current).addClass("selected")}if(this.opts.skip&&!this.opts.loop){if(this.hasNext()){this.$next.addClass("disabled")}else{this.$next.removeClass("disabled")}if(this.hasPrevious()){this.$previous.addClass("disabled")}else{this.$previous.removeClass("disabled")}}if(this.opts.onupdate){this.opts.onupdate.call(this,this.current)}},_transitions:{crossfade:{setup:function(){var d=this;this.$items.css({top:0,left:0}).filter(function(e){return e!==d.current}).css("display","none")},execute:function(e){var d=this.$items.eq(e).css("position","absolute").fadeIn(this.opts.speed,this.opts.easeIn);this.$items.eq(this.current).fadeOut(this.opts.speed,this.opts.easeOut,function(){d.css("position","static")})},teardown:function(){this.$items.removeAttr("style")}},scroll:{setup:function(){var d=this.$items.css("float","left").outerWidth(true);this.$carousel.css({position:"relative",left:0,minWidth:d*this.count});this.realcount=this.count;this.count=this.count-Math.ceil(this.$target.width()/d)+1},execute:function(d){this.$carousel.animate({left:this.$items.eq(d).position().left*-1},this.opts.speed,this.opts.easing)},teardown:function(){this.count=this.realcount;delete this.realcount;this.$carousel.removeAttr("style");this.$items.removeAttr("style")}}},hasNext:function(){return(this.current===this.count-1)},hasPrevious:function(){return(this.current===0)},next:function(){this.to(this.current+1)},previous:function(){this.to(this.current-1)},to:function(d){if(!this.opts.queue&&this.$items.queue("fx").length){return}if(d==="next"){d=this.current+1}else{if(d==="previous"){d=this.current-1}}if(d>this.count-1){if(!this.opts.loop){clearInterval(this.timeout);return}d=0}else{if(d<0){if(!this.opts.loop){return}d=this.count-1}}if(d!==this.current){this._transitions[this.opts.transition].execute.call(this,d);this.current=d}this.$target.trigger("update")},redraw:function(d){this._transitions[this.opts.transition].teardown.call(this);if(d){this.opts.transition=d}this._transitions[this.opts.transition].setup.call(this);this.to(0)}};a.fn.slides=function(d){return this.each(function(){if(!a.data(this,"slides")){a.data(this,"slides",new a.Slides(this,d))}})}})(jQuery);