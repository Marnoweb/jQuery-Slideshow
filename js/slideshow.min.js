/**
 * @name        jQuery Slideshow
 * @author      Matt Hinchliffe <https://github.com/i-like-robots/jQuery-Slideshow>
 * @modified    02/08/2012
 * @version     1.4.0
 */
;(function(a,c){var b={carousel:".carousel",items:".slide",slideWidth:false,jumpQueue:true,offset:1,skip:true,pagination:true,gestures:true,auto:6000,autostop:true,hoverPause:false,loop:false,transition:"scroll",speed:600,easing:"swing",easeIn:"swing",easeOut:"swing",visible:1,onupdate:c};a.Slides=function(e,d){this.target=e;this.$target=a(e);this.opts=a.extend({},b,d,this.$target.data());this.$carousel=this.$target.children(this.opts.carousel);this.$items=this.$carousel.children(this.opts.items);this.count=this.$items.length;this.current=this.opts.offset-1;if(this.count>1){this._init()}return this};a.Slides.prototype={_init:function(){var d=this;this.$carousel.wrap('<div style="position:relative;overflow:hidden;" />');this._transitions[this.opts.transition].setup.call(this);if(this.opts.pagination){this.$pagination=a('<ul class="slides-pagination" />');for(var e=0;e<this.count;e++){a('<li class="'+(e===this.current?"selected":"")+'"><a data-slides="'+e+'" href="">'+(e+1)+"</a></li>").appendTo(this.$pagination)}this.$pagination.appendTo(this.$target)}if(this.opts.skip){this.$next=a('<a class="slides-next" data-slides="next" href="">Next</a>').appendTo(this.$target);this.$previous=a('<a class="slides-previous" data-slides="previous" href="">Previous</a>').appendTo(this.$target)}if(this.opts.pagination||this.opts.skip){this.$target.on("click.slides","[data-slides]",function(g){g.preventDefault();var f=a(this);if(!f.hasClass("disabled")){d.to(f.data("slides"),true)}})}this.$target.css("position","relative").on("update.slides",function(){d._update()});if(this.opts.gestures&&"ontouchstart" in document.documentElement){this.target.addEventListener("touchstart",function(f){d.t={x1:f.touches[0].pageX,el:f.touches[0].target,dif:0}},false);this.target.addEventListener("touchmove",function(f){d.t.x2=f.touches[0].pageX;d.t.dif=Math.abs(d.t.x1-d.t.x2);if(d.t.dif>30){f.preventDefault()}},false);this.target.addEventListener("touchend",function(){if(d.t.x2>0&&d.t.dif>30){d.to(d.t.x1-d.t.x2>0?"next":"previous",true)}},false)}this.to(this.current);if(this.opts.auto){if(this.opts.hoverPause){this.$target.hover(function(){if(!d.stopped){d.pause()}},function(){if(d.paused){d.play()}})}this.play()}},_update:function(){if(this.opts.pagination){this.$pagination.children().removeClass("selected").eq(this.current).addClass("selected")}if(this.opts.skip&&!this.opts.loop){if(this.hasNext()){this.$next.addClass("disabled")}else{this.$next.removeClass("disabled")}if(this.hasPrevious()){this.$previous.addClass("disabled")}else{this.$previous.removeClass("disabled")}}if(this.opts.onupdate){this.opts.onupdate.call(this,this.current)}},_transitions:{crossfade:{setup:function(){var d=this;this.$items.css({top:0,left:0}).filter(function(e){return e!==d.current}).css("display","none")},execute:function(e){var d=this.$items.eq(e).css("position","absolute").fadeIn(this.opts.speed,this.opts.easeIn);this.$items.eq(this.current).fadeOut(this.opts.speed,this.opts.easeOut,function(){d.css("position","static")})},teardown:function(){this.$items.stop(true,true).removeAttr("style")}},scroll:{setup:function(){var d=this.$items.css({"float":"left",width:this.opts.slideWidth}).outerWidth(true);this.$carousel.css({position:"relative",left:0,minWidth:d*this.count});this.realcount=this.count;this.count-=this.opts.visible-1},execute:function(d){this.$carousel.animate({left:this.$items.eq(d).position().left*-1},this.opts.speed,this.opts.easing)},teardown:function(){this.count=this.realcount;delete this.realcount;this.$carousel.stop(true,true).removeAttr("style");this.$items.removeAttr("style")}}},hasNext:function(){return this.current===this.count-1},hasPrevious:function(){return this.current===0},next:function(){this.to("next")},previous:function(){this.to("previous")},to:function(d,e){if(this.opts.jumpQueue){this.$items.stop(true,true)}else{if(this.$items.queue("fx").length){return}}if(d==="next"){d=this.current+1}else{if(d==="previous"){d=this.current-1}}if(d>this.count-1){if(!this.opts.loop){this.stop();return}d=0}else{if(d<0){if(!this.opts.loop){return}d=this.count-1}}if(e&&!this.stopped){if(this.opts.autostop){this.stop()}else{if(!this.paused){this.play()}}}if(d!==this.current){this._transitions[this.opts.transition].execute.call(this,d);this.current=d}this.$target.trigger("update")},redraw:function(d){this._transitions[this.opts.transition].teardown.call(this);if(d){this.opts.transition=d}this._transitions[this.opts.transition].setup.call(this);this.to(0)},play:function(){var d=this;clearInterval(this.timeout);this.paused=this.stopped=false;this.timeout=setInterval(function(){d.to(d.current+1)},this.opts.auto)},pause:function(){this.paused=true;clearInterval(this.timeout)},stop:function(){this.stopped=true;this.paused=false;clearInterval(this.timeout)}};a.fn.slides=function(d){return this.each(function(){if(!a.data(this,"slides")){a.data(this,"slides",new a.Slides(this,d))}})}})(jQuery);